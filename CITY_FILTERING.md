# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º–∞—Ü–∏–π –ø–æ –≥–æ—Ä–æ–¥–∞–º

## –ü—Ä–∞–≤–∏–ª–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏

### 1. üîß –ú–æ–Ω—Ç–∞–∂–Ω–∏–∫ (Installer)
**–í–∏–¥–∏—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≥–æ—Ä–æ–¥–∞:**
- ‚úÖ –†–µ–∫–ª–∞–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Å–æ–∑–¥–∞–ª (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä)
- ‚úÖ –†–µ–∫–ª–∞–º–∞—Ü–∏–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–º—É (installer_assigned)

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ü–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é, –≥–æ—Ä–æ–¥ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

---

### 2. üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (Admin) –∏ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (Leader)
**–í–∏–¥—è—Ç –≤—Å–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º –≥–æ—Ä–æ–¥–∞–º:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ–∫–ª–∞–º–∞—Ü–∏—è–º
- ‚úÖ –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ù–µ—Ç (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)

---

### 3. üëî –°–µ—Ä–≤–∏—Å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (Service Manager)
**–í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ —Å–≤–æ–µ–≥–æ –≥–æ—Ä–æ–¥–∞:**
- ‚úÖ –ì–¥–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä –∏–∑ –µ–≥–æ –≥–æ—Ä–æ–¥–∞
- ‚úÖ –ì–¥–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∏–∑ –µ–≥–æ –≥–æ—Ä–æ–¥–∞
- ‚úÖ –ì–¥–µ –º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ –µ–≥–æ –≥–æ—Ä–æ–¥–∞

**–õ–æ–≥–∏–∫–∞:**
```python
complaints.filter(
    Q(initiator__city=user.city) | 
    Q(recipient__city=user.city) |
    Q(manager__city=user.city)
)
```

**–¶–µ–ª—å:** –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —Ä–µ–∫–ª–∞–º–∞—Ü–∏–π –≤ —Å–≤–æ–µ–º –≥–æ—Ä–æ–¥–µ

---

### 4. üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä (Manager)
**–í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ —Å–≤–æ–µ–≥–æ –≥–æ—Ä–æ–¥–∞:**
- ‚úÖ –ì–¥–µ –æ–Ω –Ω–∞–∑–Ω–∞—á–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- ‚úÖ –ì–¥–µ –º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ –µ–≥–æ –≥–æ—Ä–æ–¥–∞

**–õ–æ–≥–∏–∫–∞:**
```python
complaints.filter(
    Q(manager=user) | 
    Q(manager__city=user.city)
)
```

**–¶–µ–ª—å:** –†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –≤ —Å–≤–æ–µ–º –≥–æ—Ä–æ–¥–µ

---

### 5. üè≠ –û—Ç–¥–µ–ª —Ä–µ–∫–ª–∞–º–∞—Ü–∏–π (Complaint Department)
**–í–∏–¥–∏—Ç —Ñ–∞–±—Ä–∏—á–Ω—ã–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º –≥–æ—Ä–æ–¥–∞–º:**
- ‚úÖ –¢–æ–ª—å–∫–æ —Å `complaint_type='factory'`
- ‚úÖ –ü–æ –≤—Å–µ–º –≥–æ—Ä–æ–¥–∞–º (—Ñ–∞–±—Ä–∏–∫–∞ –æ–¥–Ω–∞)

**–õ–æ–≥–∏–∫–∞:**
```python
complaints.filter(complaint_type='factory')
```

**–¶–µ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–±—Ä–∏–∫–æ–π –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤

---

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –°–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–π (`complaint_list`)
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

### –†–µ–µ—Å—Ç—Ä –Ω–∞ –æ—Ç–≥—Ä—É–∑–∫—É (`shipping_registry`)
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º (`manager_production`)
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

### –§–∞–±—Ä–∏—á–Ω—ã–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ (`or_factory_complaints`)
‚úÖ –¢–æ–ª—å–∫–æ —Ñ–∞–±—Ä–∏—á–Ω—ã–µ, –≤—Å–µ –≥–æ—Ä–æ–¥–∞

### –ó–∞–¥–∞—á–∏ –º–æ–Ω—Ç–∞–∂–Ω–∏–∫–∞ (`installer_planning`)
‚úÖ –¢–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–º—É, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≥–æ—Ä–æ–¥–∞

---

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ú–µ–Ω–µ–¥–∂–µ—Ä –≤ –ú–æ—Å–∫–≤–µ
**–í–∏–¥–∏—Ç:**
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏, –≥–¥–µ –æ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏–∑ –ú–æ—Å–∫–≤—ã

**–ù–µ –≤–∏–¥–∏—Ç:**
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ –∏–∑ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤

### –ü—Ä–∏–º–µ—Ä 2: –°–ú –≤ –ö–∞–∑–∞–Ω–∏
**–í–∏–¥–∏—Ç:**
- –í—Å–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏, –≥–¥–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä –∏–∑ –ö–∞–∑–∞–Ω–∏
- –í—Å–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏, –≥–¥–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∏–∑ –ö–∞–∑–∞–Ω–∏
- –í—Å–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏, –≥–¥–µ –º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ –ö–∞–∑–∞–Ω–∏

**–ù–µ –≤–∏–¥–∏—Ç:**
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ –∏–∑ –ú–æ—Å–∫–≤—ã, –ü–∏—Ç–µ—Ä–∞ –∏ —Ç.–¥.

### –ü—Ä–∏–º–µ—Ä 3: –û–† (–ª—é–±–æ–π –≥–æ—Ä–æ–¥)
**–í–∏–¥–∏—Ç:**
- –í—Å–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ (–ú–æ—Å–∫–≤–∞, –ü–∏—Ç–µ—Ä, –ö–∞–∑–∞–Ω—å...)
- –¢–æ–ª—å–∫–æ —Ç–µ, –≥–¥–µ `complaint_type='factory'`

**–ù–µ –≤–∏–¥–∏—Ç:**
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ —Ç–∏–ø–∞ "–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫"
- –†–µ–∫–ª–∞–º–∞—Ü–∏–∏ —Ç–∏–ø–∞ "–ú–µ–Ω–µ–¥–∂–µ—Ä"

### –ü—Ä–∏–º–µ—Ä 4: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
**–í–∏–¥–∏—Ç:**
- –í—Å–µ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏
- –í—Å–µ –≥–æ—Ä–æ–¥–∞
- –í—Å–µ —Ç–∏–ø—ã
- –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–ª–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `city` –∏–∑ –º–æ–¥–µ–ª–∏ `User`:
- `user.city` - ForeignKey –Ω–∞ –º–æ–¥–µ–ª—å `City`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `__city` –≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö

### JOIN –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å–≤—è–∑–∏:
- `initiator__city` - –≥–æ—Ä–æ–¥ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞
- `recipient__city` - –≥–æ—Ä–æ–¥ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `manager__city` - –≥–æ—Ä–æ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `installer_assigned__city` - –≥–æ—Ä–æ–¥ –º–æ–Ω—Ç–∞–∂–Ω–∏–∫–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `select_related` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```python
.select_related('initiator', 'recipient', 'manager', 'production_site', 'reason')
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏
- ‚úÖ –°–ú –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –Ω–µ –≤–∏–¥–∏—Ç —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ –¥—Ä—É–≥–æ–≥–æ
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç —á—É–∂–∏–µ –≥–æ—Ä–æ–¥–∞
- ‚úÖ –ú–æ–Ω—Ç–∞–∂–Ω–∏–∫ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è
- Admin –∏ Leader - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –≤—Å–µ –≥–æ—Ä–æ–¥–∞
- –û–† - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–∞–±—Ä–∏–∫–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2024*  
*–í–µ—Ä—Å–∏—è: 1.0*  
*–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞—è*

