# Логика процесса рекламаций

## Участники процесса

### Роли в системе
- **Отдел рекламации (ОР)** - принимает решения по рекламациям фабрики
- **Менеджер** - работает с клиентами, планирует отгрузки
- **Сервисный менеджер (СМ)** - координирует процесс, планирует монтаж
- **Монтажник** - выполняет работы на объекте
- **Фабрика** - производит изделия

### Типы рекламаций
- **Менеджер** - рекламация от клиента через менеджера
- **Монтажник** - рекламация обнаружена на монтаже
- **Фабрика** - рекламация по вине производства

## Статусы рекламаций

### Основные статусы
- **В работе** - рекламация создана, ожидает обработки
- **Выполнена** - рекламация завершена успешно
- **Заказ в производстве** - изделия изготавливаются
- **Товар на складе** - изделия готовы к отгрузке
- **Отгрузка просрочена** - превышен срок отгрузки
- **Спор с фабрикой** - решение фабрики оспаривается
- **Ответ фабрики просрочен** - фабрика не ответила в срок
- **СМ просрочил ответ** - СМ не согласовал решение с клиентом
- **На проверке у СМ** - ожидает проверки сервис-менеджером

### Планирование
- **Ожидает дату от монтажника** - монтажник должен назначить дату
- **Нужно запланировать** - требуется планирование работ
- **Монтажник не запланировал** - просрочка планирования монтажа
- **Отгрузка запланирована на (дата)** - отгрузка назначена
- **Монтаж запланирован на (дата), монтажник (ФИО)** - монтаж назначен
- **Отгрузка(дата), монтаж(дата), монтажник(ФИО)** - оба процесса запланированы

## Реестры (списки рекламаций)
- **Общий список рекламаций** - все рекламации в системе
- **Список рекламаций монтажника** - задачи конкретного монтажника
- **Реестр на отгрузку** - рекламации готовые к отгрузке

---

# Процесс рекламации

## Сценарии обработки рекламаций

### Сценарий 1: Рекламация от монтажника

**Инициация:**
1. Монтажник обнаруживает проблему на объекте
2. Создает рекламацию в системе
3. Рекламация попадает в общий реестр со статусом "В работе"

**Обработка СМ:**
4. СМ выбирает тип "Монтажник" или сразу "Выполнена"
5. **Если "Выполнена"** → статус "Выполнена" (простой случай)
6. **Если "Монтажник"** → статус "Ожидает дату от монтажника"

**Планирование монтажником:**
7. Монтажник получает уведомление + SMS
8. **В течение 2 рабочих дней** должен назначить дату
9. **Если назначил** → статус "Монтажник запланировал на (дата)"
10. **Если не назначил** → статус "Монтажник не запланировал" (красный цвет)

**Выполнение:**
11. Монтажник выполняет работы
12. Нажимает "Выполнена" → статус "На проверке у СМ"
13. **Просрочка:** если не выполнил в течение месяца → статус "Просрочена"

**Проверка и завершение:**
14. СМ получает уведомление "Проверить выполненную рекламацию"
15. СМ проверяет → нажимает "Проверено" → статус "Выполнена"
16. Клиенту отправляется SMS с просьбой оценить работу

---

### Сценарий 2: Рекламация от менеджера (требует производства)

**Инициация:**
1. Менеджер получает рекламацию от клиента
2. Создает рекламацию в системе
3. Рекламация попадает в общий реестр со статусом "В работе"

**Обработка СМ:**
4. СМ выбирает тип "Менеджер"
5. Менеджер получает уведомление на ПК

**Производство:**
6. Менеджер оформляет заказ на производство (в другой системе)
7. Нажимает "Заказ в производстве" + выбирает дату готовности
8. Статус → "Заказ в производстве" + дата в реестре
9. **За 3 дня до готовности** → уведомления о приближении срока
10. **Просрочка производства** → статус "Отгрузка просрочена" (красный)

**Готовность к отгрузке:**
11. Менеджер: "Товар на складе" → статус "Товар на складе"
12. **Уведомления:**
    - Менеджеру: "Поставьте в реестр на отгрузку"
    - СМ: "Запланируйте монтаж"

**Планирование отгрузки и монтажа:**
13. **Менеджер планирует отгрузку:**
    - Заходит в реестр на отгрузку
    - "Отгрузка запланирована" + выбирает дату
    - Статус → "Отгрузка запланирована на (дата)"

14. **СМ планирует монтаж:**
    - "Монтаж запланирован" + дата + монтажник
    - Статус → "Монтаж запланирован на (дата), монтажник (ФИО)"

15. **Когда оба запланированы:**
    - Статус → "Отгрузка (дата), монтаж (дата), монтажник (ФИО)"

---

### Сценарий 3: Рекламация от фабрики (требует решения ОР)

**Инициация:**
1. СМ устанавливает тип "Фабрика"
2. ОР получает уведомление на email + ПК

**Решение ОР:**
3. **В течение 2 рабочих дней** ОР принимает решение:
   - "Запуск в производство" → статус "Отправлена"
   - "Отказ" + причина → статус "Отказ" (красный)
4. **Просрочка ОР** → статус "Ответ фабрики просрочен" (красный)

**Обработка решения:**
5. СМ получает уведомление с решением
6. **Если СМ не согласен:**
   - "Оспорить решение" + аргументы + документы
   - Статус → "Спор с фабрикой" (красный)
   - Возврат в ОР

**Согласование с клиентом:**
7. **Если СМ согласен:**
   - В течение 2 дней согласовывает с клиентом
   - "Решение с клиентом согласовано" + дата готовности
   - Статус → "Заказ в производстве"
8. **Просрочка СМ** → статус "СМ просрочил ответ" (красный)

**Производство и отгрузка:**
9. **За 3 дня до готовности** → уведомления
10. **Просрочка производства** → статус "Отгрузка просрочена" (красный)
11. **ОР: "Заказ на складе"** → статус "Товар на складе"
12. **Уведомления:**
    - СМ: "Запланируйте монтаж"
    - Менеджер: "Поставьте в реестр на отгрузку"

**Планирование (аналогично сценарию 2):**
13. **Менеджер:** "Отгрузка запланирована" → "Отгрузка запланирована на (дата)"
14. **СМ:** "Монтаж запланирован" → "Монтаж запланирован на (дата), монтажник (ФИО)"
15. **Итоговый статус:** "Отгрузка (дата), монтаж (дата), монтажник (ФИО)"

---

## Общие принципы

### Уведомления
- **Push-уведомления** - в мобильное приложение
- **SMS** - критически важные уведомления
- **Email** - для ОР и менеджеров
- **Уведомления на ПК** - для офисных сотрудников

### Контроль сроков
- **2 рабочих дня** - для планирования монтажником
- **2 рабочих дня** - для ответа ОР
- **2 рабочих дня** - для согласования с клиентом
- **3 рабочих дня** - предупреждение о готовности
- **1 месяц** - максимальный срок выполнения монтажа

### Цветовая индикация
- **Красный** - просрочки и критические статусы
- **Обычный** - нормальные статусы
- **Зеленый** - выполненные задачи

### Навигация
- Из любого уведомления можно перейти к рекламации
- Все реестры имеют фильтры и поиск
- Статусы обновляются в реальном времени

---

*Документ создан: 2024*  
*Версия: 2.0*  
*Статус: Активная*
